<nav class="navbar">
  <div class="nav-left">
    <a class="logo" (click)="goHome()">Poetry Finder</a>
  </div>
</nav>

<h2>Search Poems</h2>
<div class="search">
  <input
    type="text"
    [(ngModel)]="searchTerm"
    placeholder="Enter author or title"
    (keyup.enter)="search()"
  />
  <select [(ngModel)]="searchType">
    <option value="title">Title</option>
    <option value="author">Author</option>
  </select>
  <button (click)="search()">Search</button>
</div>

<p *ngIf="errorMessage" class="error">{{ errorMessage }}</p>

<!--random poems-->
<div
  *ngIf="randomPoems.length > 0 && poems.length === 0 && !hasSearched"
  class="poem-grid-container"
>
  <h2>Explore Poems</h2>
  <div class="poem-grid">
    <div
      *ngFor="let poem of randomPoems"
      class="poem-card"
      (click)="openPoem(poem)"
    >
      <h4>{{ poem.title }}</h4>
      <p><strong>By:</strong> {{ poem.author }}</p>
      <pre>{{ poem.lines.slice(0, 5).join("\n") }}...</pre>
    </div>
  </div>
</div>

<!--search poem-->
<div *ngIf="poems.length > 0 && !errorMessage" class="poem-grid-container">
  <h2>Search Results</h2>
  <div class="poem-grid">
    <div *ngFor="let poem of poems" class="poem-card" (click)="openPoem(poem)">
      <h4>{{ poem.title }}</h4>
      <p><strong>By:</strong> {{ poem.author }}</p>
      <pre>{{ poem.lines.slice(0, 5).join("\n") }}</pre>
    </div>
  </div>
</div>

<!--full poem pop up-->
<div class="modal" *ngIf="selectedPoem">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h2>{{ selectedPoem.title }}</h2>
    <p><strong>By:</strong> {{ selectedPoem.author }}</p>
    <pre>{{ selectedPoem.lines.join("\n") }}</pre>
  </div>
</div>
